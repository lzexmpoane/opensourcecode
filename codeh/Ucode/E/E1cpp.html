<!DOCTYPE HTML>
<head>
        <meta charset="UTF-8">
</head>
<body bgcolor="#FFFFFF"><p><a href="#" onClick="javascript :history.back(-1);">返回</a><p>
<font face="Courier New"><p>#include&lt;iostream&gt;</p><p>#include&lt;vector&gt;</p><p>#include&lt;string&gt;</p><p>using&nbsp;namespace&nbsp;std;</p><p>struct&nbsp;Wint:vector&lt;int&gt;//用标准库vector做基类，完美解决位数问题，同时更易于实现</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;//将低精度转高精度的初始化，可以自动被编译器调用</p><p>&nbsp;&nbsp;&nbsp;&nbsp;//因此无需单独写高精度数和低精度数的运算函数，十分方便</p><p>&nbsp;&nbsp;&nbsp;&nbsp;Wint(int&nbsp;n=0)//默认初始化为0，但0的保存形式为空</p><p>&nbsp;&nbsp;&nbsp;&nbsp;{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push_back(n);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check();</p><p>&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>&nbsp;&nbsp;&nbsp;&nbsp;Wint&amp;&nbsp;check()//在各类运算中经常用到的进位小函数，不妨内置</p><p>&nbsp;&nbsp;&nbsp;&nbsp;{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(!empty()&amp;&amp;!back())pop_back();//去除最高位可能存在的0</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(empty())return&nbsp;*this;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i=1;&nbsp;i&lt;size();&nbsp;++i)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*this)[i]+=(*this)[i-1]/10;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*this)[i-1]%=10;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(back()&gt;=10)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push_back(back()/10);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*this)[size()-2]%=10;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;//为使用方便，将进位后的自身返回引用</p><p>&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>};</p><p>//输入输出</p><p>istream&amp;&nbsp;operator&gt;&gt;(istream&nbsp;&amp;is,Wint&nbsp;&amp;n)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;s;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;is&gt;&gt;s;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;n.clear();</p><p>&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i=s.size()-1;&nbsp;i&gt;=0;&nbsp;--i)n.push_back(s[i]-&apos;0&apos;);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;is;</p><p>}</p><p>ostream&amp;&nbsp;operator&lt;&lt;(ostream&nbsp;&amp;os,const&nbsp;Wint&nbsp;&amp;n)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if(n.empty())os&lt;&lt;0;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i=n.size()-1;&nbsp;i&gt;=0;&nbsp;--i)os&lt;&lt;n[i];</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;os;</p><p>}</p><p>//比较，只需要写两个，其他的直接代入即可</p><p>//常量引用当参数， 避免拷贝更高效</p><p>bool&nbsp;operator!=(const&nbsp;Wint&nbsp;&amp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if(a.size()!=b.size())return&nbsp;1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i=a.size()-1;&nbsp;i&gt;=0;&nbsp;--i)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(a[i]!=b[i])return&nbsp;1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;</p><p>}</p><p>bool&nbsp;operator==(const&nbsp;Wint&nbsp;&amp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;!(a!=b);</p><p>}</p><p>bool&nbsp;operator&lt;(const&nbsp;Wint&nbsp;&amp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if(a.size()!=b.size())return&nbsp;a.size()&lt;b.size();</p><p>&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i=a.size()-1;&nbsp;i&gt;=0;&nbsp;--i)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(a[i]!=b[i])return&nbsp;a[i]&lt;b[i];</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;</p><p>}</p><p>bool&nbsp;operator&gt;(const&nbsp;Wint&nbsp;&amp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;b&lt;a;</p><p>}</p><p>bool&nbsp;operator&lt;=(const&nbsp;Wint&nbsp;&amp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;!(a&gt;b);</p><p>}</p><p>bool&nbsp;operator&gt;=(const&nbsp;Wint&nbsp;&amp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;!(a&lt;b);</p><p>}</p><p>//加法，先实现+=，这样更简洁高效</p><p>Wint&amp;&nbsp;operator+=(Wint&nbsp;&amp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if(a.size()&lt;b.size())a.resize(b.size());</p><p>&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i=0;&nbsp;i!=b.size();&nbsp;++i)a[i]+=b[i];</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;a.check();</p><p>}</p><p>Wint&nbsp;operator+(Wint&nbsp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;a+=b;</p><p>}</p><p>//减法，返回差的绝对值，由于后面有交换，故参数不用引用</p><p>Wint&amp;&nbsp;operator-=(Wint&nbsp;&amp;a,Wint&nbsp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if(a&lt;b)swap(a,b);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i=0;&nbsp;i!=b.size();&nbsp;a[i]-=b[i],++i)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(a[i]&lt;b[i])//需要借位</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;j=i+1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(!a[j])++j;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(j&gt;i)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--a[j];</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a[--j]+=10;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;a.check();</p><p>}</p><p>Wint&nbsp;operator-(Wint&nbsp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;a-=b;</p><p>}</p><p>//乘法不能先实现*=，原 因自己想</p><p>Wint&nbsp;operator*(const&nbsp;Wint&nbsp;&amp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;Wint&nbsp;n;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;n.assign(a.size()+b.size()-1,0);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i=0;&nbsp;i!=a.size();&nbsp;++i)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;j=0;&nbsp;j!=b.size();&nbsp;++j)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n[i+j]+=a[i]*b[j];</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;n.check();</p><p>}</p><p>Wint&amp;&nbsp;operator*=(Wint&nbsp;&amp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;a=a*b;</p><p>}</p><p>//除法和取模先实现一个带余除法 函数</p><p>Wint&nbsp;divmod(Wint&nbsp;&amp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;Wint&nbsp;ans;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;t=a.size()-b.size();&nbsp;a&gt;=b;&nbsp;--t)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Wint&nbsp;d;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.assign(t+1,0);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.back()=1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Wint&nbsp;c=b*d;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(a&gt;=c)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a-=c;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ans+=d;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;ans;</p><p>}</p><p>Wint&nbsp;operator/(Wint&nbsp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;divmod(a,b);</p><p>}</p><p>Wint&amp;&nbsp;operator/=(Wint&nbsp;&amp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;a=a/b;</p><p>}</p><p>Wint&amp;&nbsp;operator%=(Wint&nbsp;&amp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;divmod(a,b);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;a;</p><p>}</p><p>Wint&nbsp;operator%(Wint&nbsp;a,const&nbsp;Wint&nbsp;&amp;b)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;a%=b;</p><p>}</p><p>//顺手实现一个快速幂，可以看到和普通快速幂几乎无异</p><p>Wint&nbsp;pow(const&nbsp;Wint&nbsp;&amp;n,const&nbsp;Wint&nbsp;&amp;k)</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if(k.empty())return&nbsp;1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if(k==2)return&nbsp;n*n;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if(k.back()%2)return&nbsp;n*pow(n,k-1);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;pow(pow(n,k/2),2);</p><p>}</p><p>//通过重载运算符，还可以实现++、--、^、!、逻辑运算符等很多运算，十分简单，此处都不写了</p><p>int&nbsp;main()//你完全可以像int一般便捷地使用Wint，如下</p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;Wint&nbsp;a,b;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;//可以把b改成int型，仍能正常使用</p><p>&nbsp;&nbsp;&nbsp;&nbsp;cin&gt;&gt;a&gt;&gt;b;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;(a&lt;b)&lt;&lt;endl</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;(a==b)&lt;&lt;endl</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;a+b&lt;&lt;endl</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;a-b&lt;&lt;endl</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;a*b&lt;&lt;endl</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;a/b&lt;&lt;endl</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;a%b&lt;&lt;endl</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;pow(a,b);</p><p>}</p><p></p></font></body>